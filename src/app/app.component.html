<section class="form">
  <form class="filters" [formGroup]="formGroup">
    <div class="form__item">
      –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ:
      <span *ngFor="let type of types">
        <label>{{ type?.value }}</label>
        <input
          type="radio"
          [value]="type?.value"
          [checked]="type?.value === formGroup.get('type').value"
          name="type"
          class="radio-button mt-8"
          (change)="onTypeChange(type?.value)"
        />
      </span>
    </div>

    <div class="form__item">
      –í–≤–µ–¥–∏—Ç–µ {{ formGroup.get('type').value }} —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é:
      <div class="flex-box mt-8">
        <input
          class="search"
          [formControlName]="'searchInput'"
          (keyup.Enter)="onSubmit(formGroup.value)"
        />
        <button class="submit-button ml-12" (click)="onSubmit(formGroup.value)">
          üîé–ü–æ–∏—Å–∫
        </button>
      </div>
    </div>
  </form>

  <section class="data">
    <div class="form__item flex-box">
      <button color="white" (click)="handleAccordionState(true)">
        ‚ñº–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤—Å–µ
      </button>
      <button class="ml-12" color="white" (click)="handleAccordionState(false)">
        ‚ñ≤–°–≤–µ—Ä–Ω—É—Ç—å –≤—Å–µ
      </button>
      <button class="copy-button" color="white" (click)="onCopy()">
        {{ copyButtonLabel }}
      </button>
    </div>

    <div class="form__item" *ngIf="data$ | async as data; else loading">
      <small
        >–í—Å–µ–≥–æ —É—Å–ª—É–≥ - {{ data?.totalServices || '0' }} —à—Ç., –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ -
        {{ data?.totalComponents || '0' }} —à—Ç.</small
      >

      <section>
        <div
          type="accordion"
          class="mt-8 mb-8 block"
          *ngFor="let service of data?.services"
        >
          <h5>{{ service.serviceId }}</h5>
          <small>{{ service.serviceName }}</small>
          <div><a [href]="service.serviceId" target="_blank">[JSON]</a></div>
          <ul *ngFor="let component of service.components">
            <li>
              <b
                ><a [href]="component.componentType" target="_blank">{{
                  component.componentType
                }}</a></b
              >: {{ component.amount || '0' }} —à—Ç.
            </li>
          </ul>
        </div>
      </section>
    </div>
  </section>
</section>

<ng-template #loading>
  <div>–ó–∞–≥—Ä—É–∑–∫–∞...</div>
</ng-template>
